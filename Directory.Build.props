<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <!-- Configurazione base -->
    <WorkSpaceFolder>$(MSBuildThisFileDirectory)</WorkSpaceFolder>
    <OutputPath>$(WorkSpaceFolder)_artifacts\$(MSBuildProjectName)\</OutputPath>
    <BaseIntermediateOutputPath>$(WorkSpaceFolder)_temp\$(MSBuildProjectName)\obj\</BaseIntermediateOutputPath>
    <IntermediateOutputPath>$(BaseIntermediateOutputPath)$(Configuration)\</IntermediateOutputPath>
    
    <!-- Pulizia automatica -->
    <CleanFile>$(MSBuildProjectFile).FileListAbsolute.txt</CleanFile>
    <EnsureCleanBuild>true</EnsureCleanBuild>
  </PropertyGroup>

  <!-- Target per pulizia avanzata -->
  <Target Name="SuperClean" AfterTargets="Clean">
    <RemoveDir Directories="$(BaseIntermediateOutputPath)" />
    <RemoveDir Directories="$(OutputPath)" />
    <!-- Elimina le cartelle obj/bin legacy -->
    <RemoveDir Directories="$(ProjectDir)bin" Condition="Exists('$(ProjectDir)bin')" />
    <RemoveDir Directories="$(ProjectDir)obj" Condition="Exists('$(ProjectDir)obj')" />
  </Target>
</Project>